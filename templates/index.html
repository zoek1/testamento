<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<div id='error'>
Habilita metamask para ver tus archivos
</div>
<div id='content'></div>
<script src="https://unpkg.com/3box/dist/3box.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/ethereum/web3.js@1.0.0-beta.34/dist/web3.min.js"></script>
<script>

    var web3 = new Web3(window.ethereum || "mainnet.infura.io/v3/{{ INFURA_PROJECT }}");
    async function get_profile() {
        // require access to web3
        // web3 = new Web3(window.ethereum);

        window.ethereum.enable().then(async enable => {
            var account = await web3.eth.getAccounts()
            const profile = await Box.getProfile(account[0])

            document.getElementById('error').style.display = 'none'
            document.getElementById('content').textContent = 'Welcome ' + profile.name;
            console.log(profile)
        })
    }
    get_profile();
</script>
</body>
</html>
